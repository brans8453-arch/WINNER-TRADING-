
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>WINNER TRADING Exchange</title>
<script src="https://s3.tradingview.com/tv.js"></script>

<style>
/* ================= BODY & BASE ================= */
body {
  margin:0;
  font-family:Arial;
  background:#111;
  color:white;
  scroll-behavior:smooth;
}
header {
  position:fixed;
  width:100%;
  background:#083c2f;
  padding:10px 15px;
  z-index:10;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow: 0 2px 6px rgba(0,0,0,0.5);
}
header button {
  background:#ff8800;
  color:white;
  border:none;
  padding:6px 10px;
  margin:2px;
  border-radius:5px;
  font-size:20px;
}
.logo {
  font-weight:bold;
  color:#00ffa6;
  font-size:18px;
}
section {
  min-height:100vh;
  padding:90px 15px 30px 15px;
}
.card {
  background:#1c1c1c;
  padding:15px;
  border-radius:10px;
  margin:10px 0;
}
h2 {
  color:#00ffa6;
  margin-bottom:10px;
}
input, select {
  width:100%;
  padding:7px;
  margin:4px 0;
  border:none;
  border-radius:5px;
}
button.action {
  background:#00c26e;
  border:none;
  padding:8px;
  width:100%;
  color:white;
  border-radius:6px;
  cursor:pointer;
}
button.action.orange { background:#ff8800; }
.hidden { display:none; }
#notif {
  position:fixed;
  top:60px;
  right:10px;
  background:#00c26e;
  padding:10px;
  border-radius:6px;
  display:none;
  z-index:20;
  font-size:14px;
}
table { width:100%; font-size:13px; }
td { padding:4px; }
.green{color:#0f0}
.red{color:#f44}
ul#activity{list-style:none;padding-left:0;margin-top:10px}
ul#activity li{padding:3px 0; font-size:14px;}

/* ================= RESPONSIVE ================= */
@media(max-width:600px){
  header {
    flex-direction:row;
  }
  header .logo { font-size:16px; }
  header button { font-size:24px; padding:6px 12px; }
  #chart { height:300px !important; }
}

/* ================= MENU 3 LIGNES ================= */
.menu-lines {
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  width:24px;
  height:18px;
}
.menu-lines span {
  display:block;
  height:3px;
  background:white;
  border-radius:2px;
}
</style>
</head>

<body>
<header>
  <span class="logo">üèÜ WINNER TRADING</span>
  <button onclick="toggleLoginRegister()">
    <div class="menu-lines">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </button>
</header>

<div id="notif"></div>

<!-- ================= ACCUEIL ================= -->
<section id="home">
<h2>March√© Crypto Temps R√©el</h2>
<div id="chart" style="height:400px;"></div>

<div class="card">
Exchange d√©mo moderne inspir√© de Binance Lite.
<button class="action" onclick="show('loginRegister')">Trader maintenant</button>
</div>

<div class="card">BTC ‚Ä¢ ETH ‚Ä¢ SOL ‚Ä¢ BNB ‚Ä¢ XRP ‚Ä¢ USDT</div>
<div class="card">Devise : <b>"Tradez malin, gagnez ensemble."</b></div>
</section>

<!-- ================= LOGIN ================= -->
<section id="loginRegister" class="hidden">
<h2>Connexion / Cr√©ation de compte</h2>
<input id="loginEmail" placeholder="Email">
<input id="loginPass" placeholder="Mot de passe">
<button class="action" onclick="login()">Connexion</button>

<hr style="border:1px solid #333">

<input id="regEmail" placeholder="Email">
<input id="regPass" placeholder="Mot de passe">
<input id="refCode" placeholder="Code parrain obligatoire">
<button class="action" onclick="register()">Cr√©er compte</button>
</section>

<!-- ================= DASHBOARD ================= -->
<section id="dashboard" class="hidden">
<h2>Dashboard Utilisateur</h2>

<div class="card">
Solde total: <span id="totalBalance"></span> USDT
<button onclick="toggleBalance()">Afficher/Masquer</button>
</div>

<div class="card">
<h3>Wallet multi crypto</h3>
<div id="wallets"></div>
</div>

<div class="card">
<h3>D√©p√¥t simul√©</h3>
<input id="depositAmount" placeholder="Montant">
<button class="action" onclick="deposit()">D√©p√¥t</button>
</div>

<div class="card">
<h3>Trading Achat / Vente</h3>
<select id="coin">
<option>BTC</option>
<option>ETH</option>
<option>SOL</option>
</select>
<input id="amount" placeholder="Montant USDT">
<button class="action" onclick="buy()">Acheter</button>
<button class="action orange" onclick="sell()">Vendre</button>
</div>

<div class="card">
<h3>Historique trading</h3>
<button class="action" onclick="renderHistory()">Afficher historique</button>
<div id="history"></div>
</div>

<div class="card">
<h3>Classement traders</h3>
<div id="leaderboard"></div>
</div>

<div class="card">
<h3>Activit√© r√©cente</h3>
<ul id="activity"></ul>
</div>

<div class="card">
<h3>Parrainage & gains √©quipe</h3>
<p id="refText"></p>
<p>Membres √©quipe: <span id="teamCount">0</span></p>
<p>Bonus gagn√©: <span id="teamBonus">0</span> USDT</p>
</div>

<div class="card">
<h3>Signal automatique</h3>
<button class="action" onclick="tradeSignal()">Trader signal</button>
<p id="signalStatus"></p>
</div>
</section>

<!-- ================= ADMIN ================= -->
<section id="admin" class="hidden">
<h2>Interface Administrateur</h2>

<div class="card">
Solde plateforme: 200000 USDT
</div>

<div class="card">
<h3>Code parrain Admin</h3>
<p id="adminRef"></p>
</div>

<div class="card">
<h3>Total fonds utilisateurs</h3>
<p id="totalFunds"></p>
</div>

<div class="card">
<h3>Activation compte utilisateur</h3>
<input id="activateUserId" placeholder="Email ou ID utilisateur">
<input id="activateAmount" placeholder="Montant initial (USDT)">
<button class="action" onclick="activateUser()">Activer compte</button>
</div>

<div class="card">
<h3>Utilisateurs</h3>
<button class="action" onclick="renderUsers()">Voir utilisateurs</button>
<div id="userList"></div>
</div>
</section>

<script>
// ================== TRADINGVIEW CHART ==================
new TradingView.widget({
container_id:"chart",
width:"100%",
height:400,
symbol:"BINANCE:BTCUSDT",
interval:"30",
theme:"dark"
});

// ===================== NOTIFICATIONS =====================
function notify(msg){
let n=document.getElementById("notif");
n.innerText=msg;
n.style.display="block";
setTimeout(()=>n.style.display="none",2500);
}
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}
function toggleLoginRegister(){show('loginRegister');}

// =================== UTILISATEURS =====================
let users=JSON.parse(localStorage.users||"{}");
let currentUser=null;

// ===== SAUVEGARDE S√âCURIS√âE =====
function saveUsers(){
  localStorage.users = JSON.stringify(users);
}

// ===== MARCH√â SIMUL√â STABLE =====
let marketPrice = { BTC:30000, ETH:1800, SOL:100 };
function updateMarket(){
  for(let c in marketPrice){
    marketPrice[c] *= 1 + (Math.random()-0.5)/100;
  }
}
setInterval(updateMarket,4000);

// ADMIN auto
if(!users["admin"]){
users["admin"]={
pass:"admin123",
wallet:{USDT:0,BTC:0,ETH:0,SOL:0},
history:[],
ref:"ADMIN-WT001",
team:0,
bonus:0,
active:true
};
saveUsers();
}

// ================= INSCRIPTION =================
function register(){
let email=regEmail.value;
let pass=regPass.value;
let refInput=refCode.value;
if(!refInput) return notify("Code parrain requis");

let refOwner=null;
for(let u in users){ if(users[u].ref===refInput) refOwner=u; }

users[email]={
pass,
wallet:{USDT:0,BTC:0,ETH:0,SOL:0},
history:[],
ref:"WT"+Math.floor(Math.random()*99999),
team:0,
bonus:0,
sponsor:refOwner,
active:false
};
notify("Compte cr√©√©, en attente activation admin");
saveUsers();
}

// ================= ADMIN =================
function activateUser(){
let id=document.getElementById("activateUserId").value;
if(id==="admin") return notify("Compte admin prot√©g√©"); // protection admin
let amount=parseFloat(document.getElementById("activateAmount").value)||50;
if(!users[id]) return notify("Utilisateur introuvable");
if(users[id].active) return notify("Utilisateur d√©j√† activ√©");

users[id].wallet.USDT=amount;
users[id].active=true;

if(users[id].sponsor){
let sponsor=users[id].sponsor;
users[sponsor].bonus+=8;
users[sponsor].wallet.USDT+=8;
}

saveUsers();
notify("Compte activ√© : " + id + " avec solde " + amount + " USDT et bonus parrain 8 USDT");
updateTotalFunds();
}

// ================= LOGIN =================
function login(){
let u=users[loginEmail.value];
if(!u || u.pass!==loginPass.value) return notify("Connexion refus√©e");
currentUser=loginEmail.value;

if(!u.active && currentUser!=="admin") return notify("Votre compte n'est pas encore activ√© par l'admin");

if(currentUser==="admin"){
adminRef.innerText="Code admin : "+u.ref;
updateTotalFunds();
show("admin");
return;
}

updateWallet();
refText.innerText="Votre code : "+u.ref;
teamCount.innerText=u.team;
teamBonus.innerText=u.bonus;
renderHistory();
show("dashboard");
}

// ================= WALLET =================
function updateWallet(){
let w=users[currentUser].wallet;
wallets.innerHTML="";
let total=w.USDT;

for(let k in w){
wallets.innerHTML+=k+" : "+w[k].toFixed(4)+"<br>";
if(k!=="USDT" && marketPrice[k]){
  total += w[k]*marketPrice[k];
}
}

totalBalance.innerText=total.toFixed(2);
renderLeaderboard();
saveUsers();
}

function deposit(){
if(!users[currentUser].active) return notify("Compte non activ√©");
let amount=parseFloat(depositAmount.value);
if(!amount) return;
users[currentUser].wallet.USDT+=amount;
updateWallet();
notify("D√©p√¥t confirm√©");
}

// ================= TRADING =================
function buy(){
if(!users[currentUser].active) return notify("Compte non activ√©");
let amt=parseFloat(amount.value);
let coin=document.getElementById("coin").value;
if(users[currentUser].wallet.USDT<amt) return notify("Solde insuffisant");
let price=marketPrice[coin];
let qty=amt/price;
users[currentUser].wallet.USDT-=amt;
users[currentUser].wallet[coin]+=qty;
addHistory("Achat "+coin);
updateWallet();
notify("Achat ex√©cut√©");
}

function sell(){
if(!users[currentUser].active) return notify("Compte non activ√©");
let amt=parseFloat(amount.value);
let coin=document.getElementById("coin").value;
let price=marketPrice[coin];
let qty=amt/price;
if(users[currentUser].wallet[coin]<qty) return notify("Crypto insuffisant");
users[currentUser].wallet[coin]-=qty;
users[currentUser].wallet.USDT+=amt;
addHistory("Vente "+coin);
updateWallet();
notify("Vente ex√©cut√©e");
}

// ================= SIGNAL =================
function tradeSignal(){
if(!users[currentUser].active) return notify("Compte non activ√©");
let gain=Math.floor(Math.random()*20)+5;
users[currentUser].wallet.USDT+=gain;
addHistory("Signal +"+gain);
updateWallet();
notify("Signal gagn√© +" + gain);
}

// ================= HISTORIQUE =================
function addHistory(text){
users[currentUser].history.unshift(new Date().toLocaleTimeString()+" - "+text);
renderHistory();
}
function renderHistory(){
history.innerHTML=users[currentUser].history.slice(0,10).join("<br>");
}

// ================= LEADERBOARD =================
function renderLeaderboard(){
let arr=[];
for(let u in users) arr.push([u,users[u].wallet.USDT]);
arr.sort((a,b)=>b[1]-a[1]);
leaderboard.innerHTML=arr.slice(0,5)
.map((u,i)=>`${i+1}. ${u[0]} : ${u[1].toFixed(2)} USDT`)
.join("<br>");
}

// ================= ADMIN =================
function renderUsers(){
userList.innerHTML=Object.keys(users)
.map(u=>u+" : "+users[u].wallet.USDT.toFixed(2))
.join("<br>");
}
function updateTotalFunds(){
let sum=0;
for(let u in users){ sum+=users[u].wallet.USDT; }
totalFunds.innerText=sum.toFixed(2)+" USDT en circulation";
}

// ================= ACTIVIT√â =================
const fakeUsers=["Trader245","CryptoMax","UserX","Alpha"];
const actions=["achet√©","vendu"];
function fakeTrade(){
let user=fakeUsers[Math.floor(Math.random()*fakeUsers.length)];
let action=actions[Math.floor(Math.random()*actions.length)];
let amount=(Math.random()*0.5).toFixed(3);
const ul=document.getElementById("activity");
if(!ul) return;
const li=document.createElement("li");
li.innerText=`${user} a ${action} ${amount} BTC`;
ul.prepend(li);
if(ul.children.length>5) ul.removeChild(ul.lastChild);
}
setInterval(fakeTrade,15000);

// ================= SIMULATION UTILISATEURS =================
function simulateUsers(){
for(let i=0;i<20;i++){
let name="user_demo_"+i;
if(!users[name]){
users[name]={
pass:"123",
wallet:{USDT:Math.random()*50000,BTC:0,ETH:0,SOL:0},
history:[],
ref:"WT"+Math.floor(Math.random()*99999),
team:0,
bonus:0,
active:true
};
}
}
saveUsers();
}
simulateUsers();

function toggleBalance(){
let t=document.getElementById("totalBalance");
t.style.visibility=t.style.visibility==="hidden"?"visible":"hidden";
}
</script>
</body>
</html>
